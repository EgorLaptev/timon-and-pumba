'use strict';import {Pumba} from "./Pumba.js";import {Caterpillar} from "./Caterpillar.js";import {Hyena} from "./Hyena.js";import {Control} from "./Control.js";import {Collision} from "./Collision.js";import {Panel} from "./Panel.js";import {Timer} from "./Timer.js";export class Game{    static cnv = null;    static ctx = null;    static time = 0; // In seconds    static bgImage = '../Media/Фоны/background-1.png';    static bgAudio = new Audio('../Media/Music/41461198_326895439.mp3');    static isStart = false;    static onPause = false;    static start()    {        Game.isStart = true;        /* Start music */        Game.bgAudio.play();        Game.bgAudio.loop = true;        /* Set start position */        Pumba.x = 25;        Pumba.y = Game.cnv.height/2;        Game.generateEntities(); // Generate hyenas & caterpillars        Control.define(); // Set controls        Timer.start(); // Start timer        /* 1sec - 1hp */        setInterval(()=> {            if(!Game.onPause && Pumba.health > 0) Pumba.health--        }, 1000);        /* Start main game loop */        Game.loop();    }    static loop()    {        if(!Game.onPause) {            if(Pumba.health <= 0) Game.gameOver(); // Check player's health            Game.time = Timer.time; // Synchronize & update time            Game.movement();            Game.collisions();            Game.render();        }        requestAnimationFrame(Game.loop);    }    static render()    {        /* Background */        let bg = new Image();        bg.src = Game.bgImage;        Game.ctx.drawImage(bg, 0, 0, Game.cnv.width, Game.cnv.height);        /* Entities */        Pumba.render(Game.cnv);        Caterpillar.render(Game.cnv);        Hyena.render(Game.cnv);        Panel.render(Pumba.name , Pumba.points, Pumba.health, Game.time);    }    static movement()    {        if(Control.pressedKeys[39]) Pumba.x += Pumba.speed; // Right        if(Control.pressedKeys[37]) Pumba.x -= Pumba.speed; // Left        if(Control.pressedKeys[38] && !Control.inJump) { // Jump            Control.inJump = true; // Block double jump            Pumba.y -= Pumba.jumpHeight;            setTimeout(()=>{                Pumba.y += Pumba.jumpHeight;                Control.inJump = false;            }, 750) // Jump duration        }    }    static generateEntities()    {        /* Caterpillars */        Caterpillar.generate(50, Game.cnv.height/2-100, Game.cnv.width-50, Game.cnv.height/2);        /* Hyenas */        Hyena.generate(200, Game.cnv.height/2+50, Game.cnv.width-100, Game.cnv.height/2+50);    }    static collisions()    {        /* Pumba & caterpillars*/        Caterpillar.list.forEach((caterpillar, i) => {            if(Collision.check(Pumba, caterpillar)) { // Eat                Caterpillar.list.splice(i, 1);                Caterpillar.generate(50, Game.cnv.height/2-100, Game.cnv.width-50, Game.cnv.height/2);                Pumba.points++;                Pumba.health += Caterpillar.regen;            }        });        let heynasDamage = false;        /* Pumba & hyenas */        Hyena.list.forEach((hyena, i) => {            if(Collision.check(Pumba, hyena)) { // Eat                heynasDamage = true;            } else heynasDamage = false;        });    }    /* On/Off pause in game */    static pause()    {        Game.onPause = !Game.onPause        if(Game.onPause) {            Game.bgAudio.pause();            Timer.pause();        }        else {            Game.bgAudio.play();            Timer.start(Game.time);        };    }    static gameOver()    {        window.location.reload();    }}